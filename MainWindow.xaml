<Window x:Class="CloudreveDesktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Cloudreve Desktop"
        Height="720"
        Width="1280"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Margin="0"
        Padding="0">

    <Window.Resources>
        <!-- 颜色资源 -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#6C5CE7" />
        <SolidColorBrush x:Key="BackgroundBrush" Color="#1A1A1A" />
        <SolidColorBrush x:Key="SurfaceBrush" Color="#2D2D2D" />
        <SolidColorBrush x:Key="TextPrimary" Color="#FFFFFF" />
        <SolidColorBrush x:Key="TextSecondary" Color="#B3B3B3" />
        <SolidColorBrush x:Key="HoverBrush" Color="#3A3A3A" />
        <SolidColorBrush x:Key="ActiveBrush" Color="#4A4A4A" />

        <!-- 窗口控制按钮样式 -->
        <Style TargetType="Button" x:Key="WindowControlButton">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="45" />
            <Setter Property="Height" Value="30" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 导航按钮样式 -->
        <Style TargetType="Button" x:Key="NavButton">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Padding" Value="16,12" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Border x:Name="Highlight"
                                    Width="3"
                                    HorizontalAlignment="Left"
                                    Background="{StaticResource PrimaryBrush}"
                                    Opacity="0">
                                <Border.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                                 Duration="0:0:0.2"
                                                                 To="1"
                                                                 AutoReverse="True" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Border.Triggers>
                            </Border>
                            <Border x:Name="ContentBorder"
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="6">
                                <ContentPresenter Content="{TemplateBinding Content}"
                                                  Margin="{TemplateBinding Padding}"
                                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ContentBorder" Property="Background"
                                        Value="{StaticResource HoverBrush}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ContentBorder" Property="Background"
                                        Value="{StaticResource ActiveBrush}" />
                                <Setter TargetName="Highlight" Property="Opacity" Value="1" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 工具栏按钮样式 -->
        <Style TargetType="Button" x:Key="ToolbarButton">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="10" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                RenderTransformOrigin="0.5,0.5">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                            <Border.RenderTransform>
                                <ScaleTransform x:Name="scaleTransform" />
                            </Border.RenderTransform>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBrush}" />
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                             Storyboard.TargetProperty="ScaleX"
                                                             To="0.92"
                                                             Duration="0:0:0.1" />
                                            <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                             Storyboard.TargetProperty="ScaleY"
                                                             To="0.92"
                                                             Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 搜索框样式 -->
        <Style TargetType="TextBox" x:Key="SearchBoxStyle">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="16,12" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="CaretBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="20">
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost"
                                              Margin="{TemplateBinding Padding}"
                                              VerticalAlignment="Center" />
                                <TextBlock x:Name="placeholder"
                                           Text="搜索文件..."
                                           Margin="16,0"
                                           VerticalAlignment="Center"
                                           Foreground="{StaticResource TextSecondary}"
                                           Visibility="Collapsed" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="placeholder" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#373737" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 文件项样式 -->
        <Style TargetType="Border" x:Key="FileItemStyle">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Margin" Value="0,4" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#373737" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- 窗口主容器 -->
    <Border Margin="10"
            Background="{StaticResource BackgroundBrush}"
            CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="30"
                              ShadowDepth="0"
                              Color="Black"
                              Opacity="0.4" />
        </Border.Effect>

        <Grid>
            <!-- 标题栏 -->
            <Grid Height="42"
                  VerticalAlignment="Top"
                  Background="{StaticResource SurfaceBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- 拖动区域 -->
                <Grid Grid.Column="0"
                      Background="Transparent"
                      MouseLeftButtonDown="DragWindow_MouseLeftButtonDown" />

                <!-- 窗口控制按钮 -->
                <StackPanel Grid.Column="1"
                            Orientation="Horizontal" VerticalAlignment="Top">
                    <Button Style="{StaticResource WindowControlButton}"
                            Content="&#xE921;"
                            FontFamily="Segoe MDL2 Assets"
                            Click="MinimizeButton_Click" />

                    <Button x:Name="MaximizeRestoreButton"
                            Style="{StaticResource WindowControlButton}"
                            Content="&#xE922;"
                            FontFamily="Segoe MDL2 Assets"
                            Click="MaximizeButton_Click" />

                    <Button Style="{StaticResource WindowControlButton}"
                            Content="&#xE8BB;"
                            FontFamily="Segoe MDL2 Assets" />
                </StackPanel>
            </Grid>

            <!-- 主内容区 -->
            <Grid Margin="0,42,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="240" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- 左侧导航 -->
                <Border Grid.Column="0"
                        Padding="16"
                        Background="{StaticResource SurfaceBrush}">
                    <StackPanel>
                        <TextBlock Text="CLOUDREVE"
                                   Foreground="{StaticResource PrimaryBrush}"
                                   FontSize="20"
                                   FontWeight="Bold"
                                   Margin="0,0,0,24" />

                        <Button Style="{StaticResource NavButton}"
                                Content="我的文件"
                                Margin="0,8,0,0" />
                        <Button Style="{StaticResource NavButton}"
                                Content="传输列表"
                                Margin="0,8,0,0" />
                        <Button Style="{StaticResource NavButton}"
                                Content="回收站"
                                Margin="0,8,0,0" />
                        <Button Style="{StaticResource NavButton}"
                                Content="账户设置"
                                Margin="0,8,0,0" />
                    </StackPanel>
                </Border>

                <!-- 右侧内容 -->
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!-- 工具栏 -->
                    <Border Grid.Row="0"
                            Padding="16"
                            Background="{StaticResource SurfaceBrush}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0"
                                     Style="{StaticResource SearchBoxStyle}"
                                     Width="320" />

                            <StackPanel Grid.Column="1"
                                        Orientation="Horizontal">
                                <Button Style="{StaticResource ToolbarButton}"
                                        Content="&#xE721;"
                                        FontFamily="Segoe MDL2 Assets"
                                        Margin="0,0,12,0" />
                                <Button Style="{StaticResource ToolbarButton}"
                                        Content="&#xE8FA;"
                                        FontFamily="Segoe MDL2 Assets" />
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- 文件列表 -->
                    <ScrollViewer Grid.Row="1"
                                  Padding="16"
                                  VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding Files}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource FileItemStyle}">
                                        <StackPanel Orientation="Horizontal"
                                                    Margin="12,0">
                                            <TextBlock Text="&#xE8A5;"
                                                       FontFamily="Segoe MDL2 Assets"
                                                       Foreground="{StaticResource PrimaryBrush}"
                                                       FontSize="18"
                                                       VerticalAlignment="Center" />
                                            <TextBlock
                                                Foreground="{StaticResource TextPrimary}"
                                                VerticalAlignment="Center"
                                                Margin="16,0,0,0"
                                                FontSize="14" />
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>